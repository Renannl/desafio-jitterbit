{
"openapi": "3.0.0",
"info": {
"title": "API de Pedidos",
"version": "1.0.0",
"description": "API para gerenciamento de pedidos com autenticação JWT"
},
"servers": [
{
"url": "http://localhost:3000",
"description": "Servidor local"
}
],
"components": {
"securitySchemes": {
"bearerAuth": {
"type": "http",
"scheme": "bearer",
"bearerFormat": "JWT"
}
},
"schemas": {
"LoginRequest": {
"type": "object",
"properties": {
"username": { "type": "string", "example": "admin" },
"password": { "type": "string", "example": "1234" }
},
"required": ["username", "password"]
},
"LoginResponse": {
"type": "object",
"properties": {
"token": { "type": "string", "example": "eyJhbGciOiJI..." }
}
},
"Item": {
"type": "object",
"properties": {
"idItem": { "type": "string", "example": "2434" },
"quantidadeItem": { "type": "integer", "example": 1 },
"valorItem": { "type": "number", "example": 1000 }
},
"required": ["idItem", "quantidadeItem", "valorItem"]
},
"OrderRequest": {
"type": "object",
"properties": {
"numeroPedido": { "type": "string", "example": "v10089015vdb-01" },
"valorTotal": { "type": "number", "example": 10000 },
"dataCriacao": { "type": "string", "format": "date-time", "example": "2023-07-19T12:24:11.529Z" },
"items": { "type": "array", "items": { "$ref": "#/components/schemas/Item" } }
},
"required": ["numeroPedido", "valorTotal", "dataCriacao", "items"]
},
"OrderResponse": {
"type": "object",
"properties": {
"orderId": { "type": "string" },
"value": { "type": "number" },
"creationDate": { "type": "string", "format": "date-time" },
"items": {
"type": "array",
"items": {
"type": "object",
"properties": {
"productId": { "type": "integer" },
"quantity": { "type": "integer" },
"price": { "type": "number" }
}
}
}
}
}
}
},
"security": [
{ "bearerAuth": [] }
],
"paths": {
"/login": {
"post": {
"summary": "Login",
"description": "Gera um token JWT para autenticação",
"tags": ["Auth"],
"requestBody": {
"required": true,
"content": {
"application/json": {
"schema": { "$ref": "#/components/schemas/LoginRequest" }
}
}
},
"responses": {
"200": {
"description": "Token gerado com sucesso",
"content": {
"application/json": { "schema": { "$ref": "#/components/schemas/LoginResponse" } }
}
},
"400": { "description": "Usuário ou senha inválidos" }
}
}
},
"/order": {
"post": {
"summary": "Criar pedido",
"description": "Cria um novo pedido no banco de dados",
"tags": ["Pedidos"],
"security": [{ "bearerAuth": [] }],
"requestBody": {
"required": true,
"content": {
"application/json": {
"schema": { "$ref": "#/components/schemas/OrderRequest" }
}
}
},
"responses": {
"201": {
"description": "Pedido criado com sucesso",
"content": {
"application/json": { "schema": { "$ref": "#/components/schemas/OrderResponse" } }
}
},
"400": { "description": "JSON inválido ou campos faltando" },
"500": { "description": "Erro interno do servidor" }
}
}
},
"/order/list": {
"get": {
"summary": "Listar pedidos",
"description": "Retorna todos os pedidos cadastrados",
"tags": ["Pedidos"],
"security": [{ "bearerAuth": [] }],
"responses": {
"200": {
"description": "Lista de pedidos",
"content": {
"application/json": {
"schema": {
"type": "array",
"items": { "$ref": "#/components/schemas/OrderResponse" }
}
}
}
},
"401": { "description": "Token não fornecido ou inválido" },
"500": { "description": "Erro interno do servidor" }
}
}
},
"/order/{orderId}": {
"get": {
"summary": "Obter pedido",
"description": "Retorna os detalhes de um pedido pelo ID",
"tags": ["Pedidos"],
"security": [{ "bearerAuth": [] }],
"parameters": [
{
"name": "orderId",
"in": "path",
"required": true,
"schema": { "type": "string" }
}
],
"responses": {
"200": {
"description": "Detalhes do pedido",
"content": {
"application/json": { "schema": { "$ref": "#/components/schemas/OrderResponse" } }
}
},
"404": { "description": "Pedido não encontrado" },
"401": { "description": "Token não fornecido ou inválido" },
"500": { "description": "Erro interno do servidor" }
}
},
"put": {
"summary": "Atualizar pedido",
"description": "Atualiza um pedido existente",
"tags": ["Pedidos"],
"security": [{ "bearerAuth": [] }],
"parameters": [
{
"name": "orderId",
"in": "path",
"required": true,
"schema": { "type": "string" }
}
],
"requestBody": {
"required": true,
"content": {
"application/json": { "schema": { "$ref": "#/components/schemas/OrderRequest" } }
}
},
"responses": {
"200": { "description": "Pedido atualizado com sucesso" },
"400": { "description": "JSON inválido ou campos faltando" },
"404": { "description": "Pedido não encontrado" },
"401": { "description": "Token não fornecido ou inválido" },
"500": { "description": "Erro interno do servidor" }
}
},
"delete": {
"summary": "Deletar pedido",
"description": "Remove um pedido do banco de dados",
"tags": ["Pedidos"],
"security": [{ "bearerAuth": [] }],
"parameters": [
{
"name": "orderId",
"in": "path",
"required": true,
"schema": { "type": "string" }
}
],
"responses": {
"200": { "description": "Pedido deletado com sucesso" },
"404": { "description": "Pedido não encontrado" },
"401": { "description": "Token não fornecido ou inválido" },
"500": { "description": "Erro interno do servidor" }
}
}
}
}
}
